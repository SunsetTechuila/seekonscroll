var seekonscroll=(()=>{var r=Object.create,o=Object.defineProperty,d=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,u=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[c(e)[0]])((t={exports:{}}).exports,t),t.exports},t=(e,t,n)=>{n=null!=e?r(u(e)):{};var s=!t&&e&&e.__esModule?n:o(n,"default",{value:e,enumerable:!0}),i=e,l=void 0,a=void 0;if(i&&"object"==typeof i||"function"==typeof i)for(let e of c(i))p.call(s,e)||e===l||o(s,e,{get:()=>i[e],enumerable:!(a=d(i,e))||a.enumerable});return s},n=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),a=t(e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}})()),s=t(n()),m={settingsContainer:"settings-module__settingsContainer___e9wxn_seekonscroll",heading:"settings-module__heading___AnER-_seekonscroll",description:"settings-module__description___dP4fR_seekonscroll",inputWrapper:"settings-module__inputWrapper___LgOrw_seekonscroll"},i=class{constructor(e,t,n={}){this.name=e,this.settingsId=t,this.initialSettingsFields=n,this.settingsFields=this.initialSettingsFields,this.setRerender=null,this.buttonClassnames=null,this.pushSettings=async()=>{for(Object.entries(this.settingsFields).forEach(([e,t])=>{"button"!==t.type&&void 0===this.getFieldValue(e)&&this.setFieldValue(e,t.defaultValue)});!Spicetify?.Platform?.History?.listen;)await new Promise(e=>setTimeout(e,100));this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(e=>{"/preferences"===e.pathname&&this.render()}),"/preferences"===Spicetify.Platform.History.location.pathname&&await this.render()},this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())},this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if("/preferences"!==Spicetify.Platform.History.location.pathname)return;await new Promise(e=>setTimeout(e,100))}var e=document.querySelector(".main-view-container__scroll-node-child main div");if(!e)return console.error("[spcr-settings] settings container not found");this.buttonClassnames=Array.from(e.querySelectorAll(":scope > button")).at(-1)?.className??null;let t=Array.from(e.children).find(e=>e.id===this.settingsId);t?console.log(t):((t=document.createElement("div")).id=this.settingsId,t.className=m.settingsContainer,e.appendChild(t)),s.default.render(a.default.createElement(this.FieldsContainer,null),t)},this.addButton=(e,t,n,s,i)=>{this.settingsFields[e]={type:"button",description:t,value:n,events:{onClick:s,...i}}},this.addInput=(e,t,n,s,i,l)=>{this.settingsFields[e]={type:"input",description:t,defaultValue:n,properties:i,events:{onChange:s,...l}}},this.addHidden=(e,t)=>{this.settingsFields[e]={type:"hidden",defaultValue:t}},this.addToggle=(e,t,n,s,i)=>{this.settingsFields[e]={type:"toggle",description:t,defaultValue:n,events:{onChange:s,...i}}},this.addDropDown=(e,t,n,s,i,l)=>{this.settingsFields[e]={type:"dropdown",description:t,defaultValue:n[s],options:n,events:{onSelect:i,...l}}},this.getFieldValue=e=>JSON.parse(Spicetify.LocalStorage.get(this.settingsId+"."+e)||"{}")?.value,this.setFieldValue=(e,t)=>{Spicetify.LocalStorage.set(this.settingsId+"."+e,JSON.stringify({value:t}))},this.FieldsContainer=()=>{var[e,t]=(0,a.useState)(0);return this.setRerender=t,a.default.createElement("div",{className:m.settingsContainer,key:e},a.default.createElement("h2",{className:["main-shelf-title main-type-cello",m.heading].join(" ")},this.name),Object.entries(this.settingsFields).map(([e,t])=>a.default.createElement(this.Field,{nameId:e,field:t})))},this.Field=n=>{var e=this.settingsId+"."+n.nameId;let t;if(t="button"===n.field.type?n.field.value:this.getFieldValue(n.nameId),"hidden"===n.field.type)return a.default.createElement(a.default.Fragment,null);const[s,i]=(0,a.useState)(t),l=e=>{void 0!==e&&(i(e),this.setFieldValue(n.nameId,e))};return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"main-type-mesto",style:{color:"var(--spice-subtext)"}},a.default.createElement("label",{className:m.description,htmlFor:e},n.field.description||"")),a.default.createElement("span",{className:["x-settings-secondColumn",m.inputWrapper].join(" ")},"input"===n.field.type?a.default.createElement("input",{className:"main-dropDown-dropDown",id:e,dir:"ltr",value:s,...n.field.properties||{},...n.field.events,onChange:e=>{l(e.currentTarget.value);var t=n.field.events?.onChange;t&&t(e)}}):"button"===n.field.type?a.default.createElement("span",{className:""},a.default.createElement("button",{id:e,className:this.buttonClassnames??"",...n.field.events,onClick:e=>{l();var t=n.field.events?.onClick;t&&t(e)},type:"button"},s)):"toggle"===n.field.type?a.default.createElement("label",{className:"x-toggle-wrapper x-settings-secondColumn"},a.default.createElement("input",{id:e,className:"x-toggle-input",type:"checkbox",checked:s,...n.field.events,onClick:e=>{l(e.currentTarget.checked);var t=n.field.events?.onClick;t&&t(e)}}),a.default.createElement("span",{className:"x-toggle-indicatorWrapper"},a.default.createElement("span",{className:"x-toggle-indicator"}))):"dropdown"===n.field.type?a.default.createElement("select",{className:"main-dropDown-dropDown",id:e,...n.field.events,onChange:e=>{l(n.field.options[e.currentTarget.selectedIndex]);var t=n.field.events?.onChange;t&&t(e)}},n.field.options.map((e,t)=>a.default.createElement("option",{selected:e===s,value:t+1},e))):a.default.createElement(a.default.Fragment,null)))}}};var l=function(){const d=Spicetify["Player"];let c,u,p,m,g,f;const h=new i("Seek on scroll","seekOnScroll");function y(e){const t=setInterval(()=>{d.isPlaying()===e&&clearInterval(t)},50)}function v(e){f=!0,d.seek(e);{var t=e;const n=setInterval(()=>{d.getProgress()===t&&clearInterval(n)},50)}u&&(d.play(),y(!0)),u=null,f=!1}function e(){m=document.querySelector(".playback-bar__progress-time-elapsed"),g=document.querySelector(".main-playbackBarRemainingTime-container"),p.addEventListener("wheel",n=>{if(!f){c&&clearTimeout(c);var s=d.isPlaying(),s=(null==u&&(u=s),s&&(f=!0,d.pause(),y(!1),f=!1),p)["style"];let e=n["deltaY"];h.getFieldValue("invertScroll")&&(e=-e);var i=parseInt(h.getFieldValue("skipPercent"),10),l=parseFloat(s.getPropertyValue("--progress-bar-transform"));let t;switch(!0){case 0<e:(t=l-i)<0&&(t=0);break;case e<0:100<(t=l+i)&&(t=100);break;default:return}var n=d.getDuration(),a=Math.floor(t/100*n),r=Math.floor(a/6e4),o=Math.floor(a%6e4/1e3),r=r+":"+"0".repeat(2-o.toString().length)+o;g.innerHTML.startsWith("-")&&(o=n-a,n=Math.floor(o/6e4),o=Math.floor(o%6e4/1e3),n=`-${n}:`+"0".repeat(2-o.toString().length)+o,g.innerHTML=n),s.setProperty("--progress-bar-transform",t+"%"),m.innerHTML=r,c=setTimeout(v,400,a)}})}function t(){(p=document.querySelector(".playback-bar .playback-progressbar-isInteractive .progress-bar"))?e():setTimeout(t,100)}h.addInput("skipPercent","Set percentage of track time to skip on each scroll (1-100 int)","3",void 0,{type:"number",max:"100",min:"1",placeholder:"Default is 3"}),h.addToggle("invertScroll","Invert scroll direction",!1),h.pushSettings(),t(),document.addEventListener("fullscreenchange",()=>{setTimeout(t,300)})};(async()=>{await l()})()})();(async()=>{var e;document.getElementById("seekonscroll")||((e=document.createElement("style")).id="seekonscroll",e.textContent=String.raw`
  .settings-module__settingsContainer___e9wxn_seekonscroll{display:contents}.settings-module__heading___AnER-_seekonscroll{grid-column:1/-1;font-size:1.125rem;line-height:1.5rem;color:#fff;margin-top:24px}.settings-module__description___dP4fR_seekonscroll{font-size:.875rem;line-height:1.25rem}.settings-module__inputWrapper___LgOrw_seekonscroll{display:flex;justify-self:end}
      `.trim(),document.head.appendChild(e))})();